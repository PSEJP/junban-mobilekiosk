<!doctype html>

<html>
<head>
    <title>スマホ・キオスク</title>
    <meta charset="utf-8">
    <!-- Theme Color-->
    <meta name="theme-color" content="#ff5722">
    <meta name="msapplication-navbutton-color" content="#ff5722">
    <meta name="apple-mobile-web-app-status-bar-style" content="#ff5722">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0">

    <link rel="manifest" href="/manifest.json">
    <script src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <script src="bower_components/lodash/dist/lodash.min.js"></script>

    <!-- Elements -->
    <link rel="import" href="src/junban-mobilekiosk/junban-mobilekiosk.html">

    <!-- Venders -->
    <!--<script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>-->
    <style>
        body {
            margin: 0;
            font-family: 'Roboto', 'Noto', sans-serif;
            background-color: #eee;
        }
    </style>
</head>
<body class="fullbleed">
<template id="scope" is="dom-bind">
    <junban-mobilekiosk data="{{data}}" submit="{{submit}}"></junban-mobilekiosk>
</template>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        var scope = document.querySelector('#scope');

        scope.submit = function (e) {
            console.log('submit', e);
            var answers = _.map(e.detail.form, function (answer) {
                return {
                    question: {id: answer.question_id},
                    answer: {id: answer.id}
                };
            });
            var signature = e.detail.signature;
            var body = {
                answers: answers,
                signature: signature
            };
            console.log('submit body', body);
        };

        scope.data = {
            info: {
                title: 'よしのや：山崎店',　// 店名
                counter: 24, // 正在排隊人數
                content: 'この文章はダミーです。文字の大きさ、量、字間、行間等を確認するために入れています。', // 商店簡介內文
                action_instruction: 'サインして順番に入ります' // 簽名btn內文
            },
            sign:{
                complete: false,
                width: 190,
                height: 60,
                // base64
                signature: ''
            },
            form: [
                {
                    question: 'questionA',
                    choices: [{"id":1,"question_id":1,"index":0,"answer":"Answer 1"},{"id":2,"question_id":1,"index":1,"answer":"Answer 2"}],
                    selected: '' // 由 radio-button-group 提供數值
                },
                {
                    question: 'questionB very longggggggggggggggggggg gggggggggg',
                    choices: [{"id":3,"question_id":2,"index":0,"answer":"Answer 1"},{"id":4,"question_id":2,"index":1,"answer":"Answer 2"}, {"id":5,"question_id":2,"index":2,"answer":"Answer 2"}]
                }
            ]
        };

        console.log('data ready');
    });
</script>
</body>
</html>
